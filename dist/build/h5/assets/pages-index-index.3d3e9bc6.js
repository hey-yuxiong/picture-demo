import{c as s,r as e,a as t,s as a,h as o,o as l,b as n,w as i,i as c,d as r,e as m,f as d,g as h,j as g,k as u,l as p,m as f}from"./index-a35b1473.js";const b="https://hey-yuxiong.github.io/picture-demo/dist/build/h5/static/backround.png";const k=((s,e)=>{const t=s.__vccOpts||s;for(const[a,o]of e)t[a]=o;return t})({data:()=>({resInfo:{images:[]},level:50,temUrl:"",imgToImg:{resize_mode:2,denoising_strength:.5,sampler_name:"",steps:30,cfg_scale:7,width:1024,height:1024,restore_faces:!0,init_images:[],prompt:"string",negative_prompt:"",sampler_index:"Euler",sampler_name:""}}),onLoad(){},methods:{uploadPhoto(){s({success:s=>{const a=s.tempFilePaths;console.log(a[0]),this.temUrl=a[0],e({url:a[0],method:"GET",responseType:"arraybuffer",success:s=>{let e=t(s.data);this.imgToImg.init_images.push(e)}})}})},save(){},sliderChange(s){console.log(s.detail.value)},start(){const s=document.querySelector(".photo-box").scrollWidth,t=document.querySelector(".photo-box").scrollHeight;this.imgToImg.width=s,this.imgToImg.height=t,a({title:"生成中...",mask:!0}),e({url:"/sdapi/v1/img2img",method:"POST",data:this.imgToImg,success:s=>{this.resInfo=s.data;let e=this.resInfo.images[0];e="data:image/png;base64,"+e,this.resInfo.images[0]=e,o()},fail:s=>{o()}})},change(){this.temUrl=""},share(){}}},[["render",function(s,e,t,a,o,k){const v=u,_=p,C=f,I=c;return l(),n(I,{class:"content"},{default:i((()=>[r(v,{class:"logo",src:b,mode:"center"}),o.temUrl?(l(),m("div",{key:0,class:"photo-box"},[o.resInfo.images.length?(l(),n(v,{key:0,class:"photo after-photo",src:o.resInfo.images[0],mode:"aspectFit"},null,8,["src"])):(l(),n(v,{key:1,class:"photo",src:o.temUrl,mode:"aspectFit"},null,8,["src"]))])):d("v-if",!0),o.temUrl?o.resInfo.images.length?(l(),m("div",{key:3,class:"btns"},[r(_,{class:"top-button save-btn",onClick:k.save},{default:i((()=>[h("保存")])),_:1},8,["onClick"]),d(' <button class="share-btn" @click="share">分享</button> ')])):(l(),m("div",{key:2,class:"start-btns"},[r(C,{class:"level-slider",value:o.resInfo.denoising_strength,min:.01,max:.5,step:.01,"show-value":"",backgroundColor:"",activeColor:"#e62e86",onChange:k.sliderChange,"block-color":"#fff"},null,8,["value","min","max","step","onChange"]),g("div",{class:"show-box-btns"},[r(_,{class:"start-btn",onClick:k.start},{default:i((()=>[h("开始生成")])),_:1},8,["onClick"]),r(_,{class:"change-btn",onClick:k.change},{default:i((()=>[h("换图")])),_:1},8,["onClick"])])])):(l(),m("div",{key:1,class:"btns"},[r(_,{class:"top-button upload-btn",onClick:k.uploadPhoto},{default:i((()=>[h("上传")])),_:1},8,["onClick"]),d(' <button type="default" plain="true">照相</button> ')]))])),_:1})}],["__scopeId","data-v-78a5a7ef"]]);export{k as default};
