import{c as s,r as e,a as t,s as a,h as o,o as l,b as n,w as i,i as r,d as c,e as m,f as h,g as d,j as g,k as u,l as p,m as f}from"./index-a56043b7.js";import{_ as b,a as _}from"./_plugin-vue_export-helper.9d0708a2.js";const v=b({data:()=>({resInfo:{images:[]},level:50,temUrl:"",imgToImg:{resize_mode:2,denoising_strength:.5,sampler_name:"",steps:30,cfg_scale:7,width:1024,height:1024,restore_faces:!0,init_images:[],prompt:"string",negative_prompt:"",sampler_index:"Euler",sampler_name:""}}),onLoad(){},methods:{uploadPhoto(){s({success:s=>{const a=s.tempFilePaths;console.log(a[0]),this.temUrl=a[0],e({url:a[0],method:"GET",responseType:"arraybuffer",success:s=>{let e=t(s.data);this.imgToImg.init_images.push(e)}})}})},save(){},sliderChange(s){console.log(s.detail.value)},start(){const s=document.querySelector(".photo-box").scrollWidth,t=document.querySelector(".photo-box").scrollHeight;this.imgToImg.width=s,this.imgToImg.height=t,a({title:"生成中...",mask:!0}),e({url:"/sdapi/v1/img2img",method:"POST",data:this.imgToImg,success:s=>{this.resInfo=s.data;let e=this.resInfo.images[0];e="data:image/png;base64,"+e,this.resInfo.images[0]=e,o()},fail:s=>{o()}})},change(){this.temUrl=""},share(){}}},[["render",function(s,e,t,a,o,b){const v=u,k=p,C=f,I=r;return l(),n(I,{class:"content"},{default:i((()=>[c(v,{class:"logo",src:_,mode:"center"}),o.temUrl?(l(),m("div",{key:0,class:"photo-box"},[o.resInfo.images.length?(l(),n(v,{key:0,class:"photo after-photo",src:o.resInfo.images[0],mode:"aspectFit"},null,8,["src"])):(l(),n(v,{key:1,class:"photo",src:o.temUrl,mode:"aspectFit"},null,8,["src"]))])):h("v-if",!0),o.temUrl?o.resInfo.images.length?(l(),m("div",{key:3,class:"btns"},[c(k,{class:"top-button save-btn",onClick:b.save},{default:i((()=>[d("保存")])),_:1},8,["onClick"]),h(' <button class="share-btn" @click="share">分享</button> ')])):(l(),m("div",{key:2,class:"start-btns"},[c(C,{class:"level-slider",value:o.resInfo.denoising_strength,min:.01,max:.5,step:.01,"show-value":"",backgroundColor:"",activeColor:"#e62e86",onChange:b.sliderChange,"block-color":"#fff"},null,8,["value","min","max","step","onChange"]),g("div",{class:"show-box-btns"},[c(k,{class:"start-btn",onClick:b.start},{default:i((()=>[d("开始生成")])),_:1},8,["onClick"]),c(k,{class:"change-btn",onClick:b.change},{default:i((()=>[d("换图")])),_:1},8,["onClick"])])])):(l(),m("div",{key:1,class:"btns"},[c(k,{class:"top-button upload-btn",onClick:b.uploadPhoto},{default:i((()=>[d("上传")])),_:1},8,["onClick"]),h(' <button type="default" plain="true">照相</button> ')]))])),_:1})}],["__scopeId","data-v-78a5a7ef"]]);export{v as default};
