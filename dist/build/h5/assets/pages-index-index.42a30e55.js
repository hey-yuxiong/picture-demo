import{c as s,r as e,a as t,s as o,h as a,o as l,b as n,w as i,i as c,d as r,e as m,f as d,g as h,j as g,k as u,l as p,m as f}from"./index-64f5bfca.js";const b="https://hey-yuxiong.github.io/picture-demo/dist/build/h5/static/backround.png";const v=((s,e)=>{const t=s.__vccOpts||s;for(const[o,a]of e)t[o]=a;return t})({data:()=>({resInfo:{images:[]},level:50,temUrl:"",imgToImg:{resize_mode:2,denoising_strength:.5,sampler_name:"",steps:30,cfg_scale:7,width:1024,height:1024,restore_faces:!0,init_images:[],prompt:"string",negative_prompt:"",sampler_index:"Euler",sampler_name:""}}),onLoad(){},methods:{uploadPhoto(){s({success:s=>{const o=s.tempFilePaths;console.log(o[0]),this.temUrl=o[0],e({url:o[0],method:"GET",responseType:"arraybuffer",success:s=>{let e=t(s.data);this.imgToImg.init_images.push(e)}})}})},save(){},sliderChange(s){console.log(s.detail.value)},start(){let s="/sdapi/v1/img2img";"development"!=={}.NODE_EN&&(s="http://silenceyese.vicp.net:27860/"+s);const t=document.querySelector(".photo-box").scrollWidth,l=document.querySelector(".photo-box").scrollHeight;this.imgToImg.width=t,this.imgToImg.height=l,o({title:"生成中...",mask:!0}),e({url:s,method:"POST",data:this.imgToImg,success:s=>{this.resInfo=s.data;let e=this.resInfo.images[0];e="data:image/png;base64,"+e,this.resInfo.images[0]=e,a()},fail:s=>{a()}})},change(){this.temUrl=""},share(){}}},[["render",function(s,e,t,o,a,v){const _=u,k=p,y=f,C=c;return l(),n(C,{class:"content"},{default:i((()=>[r(_,{class:"logo",src:b,mode:"center"}),a.temUrl?(l(),m("div",{key:0,class:"photo-box"},[a.resInfo.images.length?(l(),n(_,{key:0,class:"photo after-photo",src:a.resInfo.images[0],mode:"aspectFit"},null,8,["src"])):(l(),n(_,{key:1,class:"photo",src:a.temUrl,mode:"aspectFit"},null,8,["src"]))])):d("v-if",!0),a.temUrl?a.resInfo.images.length?(l(),m("div",{key:3,class:"btns"},[r(k,{class:"top-button save-btn",onClick:v.save},{default:i((()=>[h("保存")])),_:1},8,["onClick"]),d(' <button class="share-btn" @click="share">分享</button> ')])):(l(),m("div",{key:2,class:"start-btns"},[r(y,{class:"level-slider",value:a.resInfo.denoising_strength,min:.01,max:.5,step:.01,"show-value":"",backgroundColor:"",activeColor:"#e62e86",onChange:v.sliderChange,"block-color":"#fff"},null,8,["value","min","max","step","onChange"]),g("div",{class:"show-box-btns"},[r(k,{class:"start-btn",onClick:v.start},{default:i((()=>[h("开始生成")])),_:1},8,["onClick"]),r(k,{class:"change-btn",onClick:v.change},{default:i((()=>[h("换图")])),_:1},8,["onClick"])])])):(l(),m("div",{key:1,class:"btns"},[r(k,{class:"top-button upload-btn",onClick:v.uploadPhoto},{default:i((()=>[h("上传")])),_:1},8,["onClick"]),d(' <button type="default" plain="true">照相</button> ')]))])),_:1})}],["__scopeId","data-v-579c54bc"]]);export{v as default};
